---
title: K8s Kubernetes
layout: post
tags:
  - Kubernetes
permalink: /kubernetes
---

## kubernetes
- 오픈 소스 프로젝트이다
- 컨테이너를 생성 하는 걸로 끝내는게 아닌 리소스를 분배하며 관리 한다
- k8s는 약어로 k|ubernete(8자)|s 를 의미 한하며 쿠버네티스 라고 읽는다

---

## 배포 종류
- 관리형 k8s: EKS(아마존), GKE(구글) 같은 클라우드 서비스를 이용한 k8s로 관리, 운영이 필요 없다.
- 네이티브 k8s: kuberadm, kubespray, ... 와 같은 
  `Kubernetes 클러스터 프로비저닝 도구`들을 이용해 관리, 운영
- 설치형 k8s: Rancher, Red Hat Openshift 등을 이용해 여러 패키지를 통합해 만든 설치형 버전

---

## 구성요소
### 파드(pod)
- 애플리케이션 배포 단위 뜻함
- 컨테이너의 집합이지만 주로 하나의 컨테이너만 담는다
- Ex) java 프로젝트를 배포하면 파드가 1개 생긴다
### 서비스(service)
- 외부에서 클러스터 내의 여러 파드에 접근할 수 있는 네트워크 엔드포인트를 제공
- 서비스는 로드 밸런싱을 통해 파드 간의 트래픽을 분배하며, 파드의 생애 주기와 무관하게 클러스터 내에서 안정적인 접근을 보장
### 디플로이먼트(Deployment)
- 파드를 모아둔 집합으로 여러 기능을 가지고 있다.
 - **파드 관리**: 여러 파드를 관리하고 애플리케이션의 상태를 유지
 - **자동화된 롤링 업데이트**: 롤링 업데이트를 통해 점진적으로 파드를 업데이트 하며  
   이를 통해 애플리케이션을 유지하면서 새로운 버전으로 전환
 - **롤백**: 롤백 기능을 통해 애플리케이션의 안정성을 보장 
 - **확장**: 파드의 개수를 증가시키거나 줄이며 애플리케이션의 부하를 효율적으로 처리 
 - **셀프힐링**: 문제를 감지하고 자동으로 새로운 파드를 생성하여 애플리케이션의 상태를 유지
### 로드밸런서(LoadBalancer)
- 일반적으로 서비스(Service) 리소스를 사용
- 외부 접속에 의해 발생하는 트래픽을 분산시키고 관리
  - **트래픽분산**: 외부 트래픽을 여러 파드로 분산
  - **가용성**: 파드에 문제가 생겼을 때 자동으로 정상적인 다른 파드로 트래픽을 분산
  - **확장성**: 트래픽이 증가하면 자동으로 추가파드로 분산시켜 확장성을 보장
### 네임스페이스(Namespace)
- 클러스터 내에서 리소스를 분리하고 관리하는 단위
  - **리소스 분리**: 클러스터 내의 리소스를 논리적으로 분리하며 분리를 통해 여러 프로젝트 또는 팀이 서로 영향을 미치지 않고 독립적으로 작업할 수 있게 됨.
  - 리소스 제어: 네임스페이스 마다 리소스를 할당하고 제한을 설정하여 사용 리소스를 핸들링
  - **접근제어**: 역할기반 접근 제어(RBAC)를 사용해 특정 네임스페이스에 대한 접근 권한을 설정 가능, 이를통해 사용자 또는 팀단위로 접근 가능한 작업 공간을 설정 
  - **네임스페이스 스코프**: 특정 리소스 범위를 제한. 파드, 서비스, 컨피그맵(ConfigMap), 시크릿(Secret) 등 대부분의 k8s 리소스는 네임스페이스에 속함
#### 기본 네임스페이스
- Kubernetes에는 기본적으로 다음과 같은 네임스페이스가 존재
  - **default**: 사용자 리소스가 생성될 때 기본적으로 사용하는 네임스페이스
  - **kube-system**: Kubernetes 시스템 구성 요소가 배포되는 네임스페이스
  - **kube-public**: 클러스터 내에서 모든 사용자에게 읽기 전용으로 접근 가능한 리소스가 포함
  - **kube-node-lease**: 노드의 상태를 추적하는 임대 객체를 포함